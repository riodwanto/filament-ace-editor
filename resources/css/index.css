.rd-ace-editor {
    @apply relative border rounded-lg ring-1;
    @apply border-gray-100 ring-gray-100;
    @apply dark:border-gray-700 dark:ring-gray-600;
    @apply focus-within:ring-2 focus-within:ring-blue-500;
    @apply transition-colors duration-200;
    &.has-error {
        @apply border-red-500 ring-red-500 dark:border-red-400 dark:ring-red-400;
    }
    &.rd-ace-editor-disabled {
        @apply border-gray-200 bg-gray-50 ring-gray-200;
        @apply dark:bg-gray-800 dark:border-gray-600 dark:ring-gray-600;
        @apply opacity-75;
        @apply cursor-not-allowed;
        .rd-ace-editor-content {
            @apply pointer-events-none;
        }
    }
    &--fullscreen {
        @apply fixed inset-0 z-[9999] w-screen h-screen;
        @apply bg-white dark:bg-gray-900;
        @apply overflow-hidden;
        @apply transition-all duration-200 ease-out;
        @apply scale-100 opacity-100;
        .rd-ace-editor-content {
            @apply h-full border-none rounded-none;
        }
        .rd-ace-editor-toolbar {
            @apply border-gray-200 rounded-none dark:border-gray-700;
        }
        .rd-ace-editor-status {
            @apply border-gray-200 rounded-none dark:border-gray-700;
        }
    }
    &-header {
        @apply flex items-center justify-between;
        @apply px-3 py-2 border-b border-gray-200 bg-gray-50;
        @apply dark:bg-gray-800 dark:border-gray-700;
        @apply rounded-t-lg;
        &-title {
            @apply text-sm font-semibold text-gray-700 dark:text-gray-300;
            @apply tracking-wide uppercase;
        }
        &-actions {
            @apply flex items-center gap-2;
        }
        &-fullscreen {
            @apply inline-flex items-center justify-center;
            @apply w-8 h-8 p-0;
            @apply text-sm font-medium;
            @apply bg-transparent border border-transparent;
            @apply text-gray-600 rounded;
            @apply transition-all duration-150 ease-in-out;
            @apply hover:bg-gray-200 hover:text-gray-900;
            @apply hover:scale-105 hover:shadow-sm;
            @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1;
            @apply dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:text-gray-100;
            &::before {
                content: '';
                @apply block w-4 h-4;
                background-color: currentColor;
                mask-size: contain;
                mask-repeat: no-repeat;
                mask-position: center;
                mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3'/%3E%3C/svg%3E");
                @apply transition-colors duration-150;
            }
            &:hover::before {
                @apply text-current;
            }
        }
        &-exit-fullscreen {
            @apply bg-white border-gray-200;
            @apply dark:bg-gray-700 dark:border-gray-600;
            @apply hover:bg-gray-50 hover:border-gray-300;
            @apply dark:hover:bg-gray-600 dark:hover:border-gray-500;
            &::before {
                mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M6 18L18 6M6 6l12 12'/%3E%3C/svg%3E");
            }
        }
    }
    &-toolbar {
        @apply flex flex-wrap items-center justify-end;
        @apply gap-2 px-3 py-2;
        @apply border-b border-gray-200 bg-gray-50;
        @apply dark:bg-gray-800 dark:border-gray-700;
        @apply transition-colors duration-200;
        &--empty {
            @apply justify-center;
        }
        &-group {
            @apply flex flex-wrap items-center gap-1;
        }
        &-controls {
            @apply flex items-center gap-3;
            @apply ml-auto;
        }
        &-font-size {
            @apply flex items-center gap-2;
            @apply text-sm text-gray-600 dark:text-gray-300;
            select {
                @apply w-20 h-8 py-0 pl-1 pr-0 text-xs;
                @apply bg-white border border-gray-200 rounded;
                @apply text-gray-700 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300;
                @apply focus:outline-none focus:ring-1 focus:ring-opacity-50;
                @apply cursor-pointer;
                @apply transition-all duration-150 ease-in-out;
                @apply hover:bg-gray-50 hover:border-gray-300;
                @apply hover:shadow-sm;
                @apply dark:hover:bg-gray-600 dark:hover:border-gray-500;
                @apply font-medium;
                @apply text-center;
                @apply appearance-none;
                background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 12 12'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M3 4.5l3 3 3-3'/%3e%3c/svg%3e");
                background-position: center right 4px;
                background-repeat: no-repeat;
                background-size: 12px;
                padding-right: 16px;
                .dark & {
                    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 12 12'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M3 4.5l3 3 3-3'/%3e%3c/svg%3e");
                }
                --tw-ring-color: var(--filament-primary-color, rgb(99 102 241 / 0.5));
                option {
                    @apply text-gray-700 dark:text-gray-300;
                    @apply bg-white dark:bg-gray-700;
                }
            }
            label {
                @apply text-xs font-medium;
                @apply text-gray-500 dark:text-gray-400;
                @apply tracking-wide uppercase;
                @apply whitespace-nowrap;
            }
        }
        &-word-wrap {
            @apply flex items-center gap-2;
            @apply text-sm text-gray-600 dark:text-gray-300;
            select {
                @apply w-20 h-8 py-0 pl-1 pr-0 text-xs;
                @apply bg-white border border-gray-200 rounded;
                @apply text-gray-700 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300;
                @apply focus:outline-none focus:ring-1 focus:ring-opacity-50;
                @apply cursor-pointer;
                @apply transition-all duration-150 ease-in-out;
                @apply hover:bg-gray-50 hover:border-gray-300;
                @apply hover:shadow-sm;
                @apply dark:hover:bg-gray-600 dark:hover:border-gray-500;
                @apply font-medium;
                @apply text-center;
                @apply appearance-none;
                background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 12 12'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M3 4.5l3 3 3-3'/%3e%3c/svg%3e");
                background-position: center right 4px;
                background-repeat: no-repeat;
                background-size: 12px;
                padding-right: 16px;
                .dark & {
                    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 12 12'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M3 4.5l3 3 3-3'/%3e%3c/svg%3e");
                }
                --tw-ring-color: var(--filament-primary-color, rgb(99 102 241 / 0.5));
                option {
                    @apply text-gray-700 dark:text-gray-300;
                    @apply bg-white dark:bg-gray-700;
                }
            }
            label {
                @apply text-xs font-medium;
                @apply text-gray-500 dark:text-gray-400;
                @apply tracking-wide uppercase;
                @apply whitespace-nowrap;
            }
        }
    }
    &-btn {
        @apply inline-flex items-center justify-center;
        @apply w-8 h-8 p-0;
        @apply text-sm font-medium;
        @apply bg-white border border-gray-200;
        @apply text-gray-600 rounded;
        @apply transition-all duration-150 ease-in-out;
        @apply hover:bg-gray-50 hover:text-gray-900 hover:border-gray-300;
        @apply hover:scale-105 hover:shadow-sm;
        @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1;
        @apply dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300;
        @apply dark:hover:bg-gray-600 dark:hover:text-gray-100 dark:hover:border-gray-500;
        @apply disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:shadow-none;
        @apply disabled:hover:bg-white dark:disabled:hover:bg-gray-700;
        @apply disabled:hover:text-gray-600 dark:disabled:hover:text-gray-300;
        &.rd-ace-btn--active,
        &.active {
            &::before {
                background-color: var(--filament-primary-color, rgb(99 102 241));
                filter: brightness(1.2) contrast(1.3) saturate(1.1);
                transform: scale(1.1);
                box-shadow: 0 0 2px rgba(0, 0, 0, 0.2);
            }
        }
        @media (prefers-color-scheme: dark) {
            &.rd-ace-btn--active,
            &.active {
                &::before {
                    background-color: var(--filament-primary-color-dark, rgb(129 140 248));
                }
            }
        }
        .dark &.rd-ace-btn--active,
        .dark &.active {
            &::before {
                background-color: var(--filament-primary-color-dark, rgb(129 140 248));
            }
        }
        &::before {
            content: '';
            display: block;
            width: 18px;
            height: 18px;
            @apply transition-colors duration-150;
            @apply text-gray-600 dark:text-gray-300;
            background-color: currentColor;
            mask-size: contain;
            mask-repeat: no-repeat;
            mask-position: center;
            filter: brightness(1.1) contrast(1.2);
            transform: scale(1.05);
        }
        &:hover:not(:disabled)::before {
            @apply text-gray-900 dark:text-gray-100;
        }
        &:disabled::before {
            @apply text-gray-400 dark:text-gray-500;
        }
        svg {
            @apply hidden;
        }
        &--undo::before {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6'/%3E%3C/svg%3E");
        }
        &--redo::before {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6'/%3E%3C/svg%3E");
        }
        &--find::before {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.35-4.35'/%3E%3C/svg%3E");
        }
        &--replace::before {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z'/%3E%3Cpath d='M12 3v7l7 7'/%3E%3C/svg%3E");
        }
        &--goto-line::before {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6'/%3E%3Cpath d='M13 2h3a2 2 0 012 2v3'/%3E%3Cline x1='12' y1='22' x2='12' y2='16'/%3E%3Cline x1='8' y1='22' x2='16' y2='22'/%3E%3C/svg%3E");
        }
        &--toggle-comment::before {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M4 12h16M4 6h16M4 18h7'/%3E%3Cpath d='M9 14h6M9 10h6'/%3E%3Cpath d='M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z'/%3E%3C/svg%3E");
        }
        &--fullscreen::before {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3'/%3E%3C/svg%3E");
        }
        &--toggle-fold::before {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M10 6h4a2 2 0 012 2v8a2 2 0 01-2 2h-4a2 2 0 01-2-2V8a2 2 0 012-2z'/%3E%3Cpath d='M4 12h16'/%3E%3C/svg%3E");
        }
        &--toggle-fold.fold-state-unfold::before {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M10 6h4a2 2 0 012 2v8a2 2 0 01-2 2h-4a2 2 0 01-2-2V8a2 2 0 012-2z'/%3E%3Cpath d='M4 12h16'/%3E%3Cpath d='M12 6v12'/%3E%3C/svg%3E");
        }
        &--show-invisibles::before {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Ccircle cx='12' cy='12' r='3'/%3E%3Cpath d='M12 1v6m0 6v6m4.22-13.22l4.24 4.24M1.54 1.54l4.24 4.24M20.46 20.46l-4.24-4.24M1.54 20.46l4.24-4.24'/%3E%3C/svg%3E");
        }
        &--toggle-wordwrap::before {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpolyline points='4 7 4 4 20 4 20 7'/%3E%3Cline x1='9' y1='20' x2='15' y2='20'/%3E%3Cline x1='12' y1='4' x2='12' y2='20'/%3E%3C/svg%3E");
        }
        &--convert-uppercase::before {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpolyline points='7 11 9 13 17 5'/%3E%3Cpath d='M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11'/%3E%3Cpath d='M12 3v9'/%3E%3Cpath d='M9 6h6'/%3E%3C/svg%3E");
        }
        &--convert-lowercase::before {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M3 7V5a2 2 0 012-2h14a2 2 0 012 2v12a2 2 0 01-2 2h-4'/%3E%3Cpolyline points='3 7 12 16 21 7'/%3E%3Cline x1='8' y1='11' x2='16' y2='11'/%3E%3Cline x1='8' y1='15' x2='16' y2='15'/%3E%3C/svg%3E");
        }
        &--toggle-print-margin::before {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z'/%3E%3Cpolyline points='14 2 14 8 20 8'/%3E%3Cline x1='16' y1='13' x2='8' y2='13'/%3E%3Cline x1='16' y1='17' x2='8' y2='17'/%3E%3Cpolyline points='10 9 9 9 8 9'/%3E%3C/svg%3E");
        }
      }
    &-content {
        @apply transition-colors duration-200;
        &.with-header {
            @apply border-t-0 rounded-t-none;
        }
        &.has-toolbar {
            @apply border-t-0;
            &.no-header {
                @apply rounded-t-lg;
            }
        }
        &.no-toolbar {
            &.with-header {
                @apply rounded-b-lg;
            }
            &.no-header {
                @apply rounded-lg;
            }
        }
    }
    &-wrapper {
        @apply w-full h-full;
    }
    &-status {
        @apply flex items-center justify-between;
        @apply px-3 py-1.5 text-xs;
        @apply border-t border-gray-200 bg-gray-50;
        @apply dark:bg-gray-800 dark:border-gray-700;
        @apply font-mono;
        @apply rounded-b-lg;
        &-position,
        &-info {
            @apply text-gray-600 dark:text-gray-400;
            span {
                @apply text-gray-800 dark:text-gray-200;
            }
        }
    }
    &-error {
        @apply mt-1 text-sm text-red-600 dark:text-red-400;
    }
    &-footer {
        @apply px-3 py-2 border-t border-gray-200 bg-gray-50;
        @apply dark:bg-gray-800 dark:border-gray-700;
        @apply rounded-b-lg;
        @apply text-xs text-gray-500 dark:text-gray-400;
    }
}
@media (max-width: 640px) {
    .rd-ace-editor {
        &-header {
            @apply flex-col items-start gap-2;
            &-actions {
                @apply justify-end w-full;
            }
        }
        &-toolbar {
            @apply flex-col items-stretch gap-1;
            &-group {
                @apply justify-center;
            }
            &-controls {
                @apply flex-col items-stretch gap-2;
                @apply pt-2 mt-2 border-t border-gray-200 dark:border-gray-600;
            }
        }
    }
}
.rd-ace-editor--fullscreen {
    @apply transition-all duration-200 ease-out;
    @apply scale-100 opacity-100;
}
.rd-ace-editor {
    &:focus-within {
        --tw-ring-color: var(--filament-primary-color, rgb(99 102 241 / 0.5));
    }
    &-btn:focus {
        --tw-ring-color: var(--filament-primary-color, rgb(99 102 241 / 0.5));
    }
}
.ace_print-margin {
    transform: translateZ(0);
    will-change: transform, opacity;
    backface-visibility: hidden;
    transition: opacity 0.1s ease-out, transform 0.1s ease-out;
}
.dark .ace_print-margin {
    opacity: 0.8;
}
.ace_editor:focus .ace_print-margin {
    opacity: 1;
}
@media print {
    .rd-ace-editor {
        &-toolbar,
        &-status,
        &-header,
        &-footer {
            @apply hidden;
        }
        &-content {
            @apply border-none rounded-t-lg shadow-none;
        }
    }
}
@media (prefers-contrast: high) {
    .rd-ace-editor {
        @apply border-2 border-black dark:border-white;
        &-btn {
            @apply border-2 border-black dark:border-white;
        }
    }
}
@media (prefers-reduced-motion: reduce) {
    .rd-ace-editor {
        &,
        &-btn,
        &-toolbar,
        &-content {
            @apply transition-none;
        }
        &-btn:hover {
            @apply transform-none hover:scale-100;
        }
    }
}
